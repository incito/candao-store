<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.candao.www.dataserver.mapper.TableMapper">
    <update id="updaStatus0" parameterType="String">
        update t_table set status=0
        where tableno=#{tableNo}
    </update>
    <update id="updaStatus1" parameterType="map">
        update t_table set status=1,orderid=#{orderId}
        where tableid=#{tableId}
    </update>
    <select id="getOrderIdByTableNo" resultType="java.lang.String">
       SELECT orderid FROM t_table b WHERE b.tableno =#{tableNo} LIMIT 0,1
    </select>
    <select id="selectOrderIdOfStatusN5" parameterType="String" resultType="String">
        select orderid from  t_table b   where b.tableno=#{tableNo} and b.status &lt;&gt; 5 LIMIT 0 , 1
    </select>
    <select id="selectOrderId" parameterType="String" resultType="String">
        select orderid from  t_table b   where b.tableno=#{tableNo} LIMIT 0 , 1
    </select>
    <select id="selectTableNo" parameterType="String" resultType="String">
        select tableno from t_table where tableid=#{tableId} LIMIT 0 , 1
    </select>
    <select id="selectStatus" parameterType="String" resultType="Integer">
        select status from t_table where tableid=#{tableId} LIMIT 0 , 1
    </select>
    <update id="updateTableByTableId">
        UPDATE t_table SET orderid = #{orderId} WHERE	tableid = #{tableId}
    </update>
    <select id="getTableNoByOrderId" resultType="java.lang.String">
        SELECT tableno FROM t_table WHERE tableid=(SELECT currenttableid FROM t_order WHERE orderid=#{orderId})
    </select>
</mapper>
